# 课题A：手掌掌纹识别与三大主线绘制

## 1.背景与目标

我们希望候选人完成一个手机端拍照/导入手掌照片后：

- 自动识别掌心区域；
- 自动定位并提取掌纹三大主线：**感情线 Heart line / 智慧线 Head line / 生命线 Life line**（手相学常见三大主线）。 
- 在原图上进行**划线叠加展示**（可用不同颜色或不同线型区分）。

> 注意：该课题仅用于图像处理与工程能力评估，不讨论手相结论是否科学。

## 2.范围（In Scope / Out of Scope）

**In Scope**

- 手机拍摄/相册导入一张手掌照片
- 自动检测手掌/掌心ROI、校正方向（尽量）
- 三条主线的像素级或折线级可视化（叠加到原图）
- 输出每条线的：点集/折线、置信度、失败原因（若失败）

**Out of Scope（非必需）**

- 手相“解读”、性格预测等
- 多手、多张批处理
- 云端识别（默认要求本地处理，降低隐私风险）

## 3.用户流程（最低可用）

1. 打开 Demo（App/Web/桌面均可）
2. 选择“拍照”或“导入照片”
3. 点击“识别”
4. 展示：原图 + 三条线叠加结果（可开关显示）
5. 展示：识别耗时、每条线置信度、若失败给出可读原因（如：光照过暗/手掌遮挡/未检测到手）

## 4.功能需求（Functional Requirements）

FR1. 图片输入

- 支持 JPG/PNG
- 支持至少 1080p 输入（可内部缩放处理）
- EXIF 方向处理（避免横竖颠倒）

FR2. 手掌检测与ROI

- 自动识别手掌区域（背景复杂也能工作在一定范围内）
- 尽量区分手背/手心；若无法保证，需在UI提示“请拍手心”
- 支持轻度遮挡（例如手指部分出画面）

FR3. 掌纹增强与线条提取

- 对掌纹进行增强（对光照不均有一定鲁棒性）
- 从增强结果中提取主要纹路骨架（skeleton/graph/curve）

FR4. 三大主线识别与绘制

- 输出 Heart/Head/Life 三条线的折线（或像素掩膜）
- 在原图叠加显示（线条清晰、不遮挡过多）
- 每条线输出置信度（0~1 或百分比）

FR5. 失败处理

- 未识别成功必须返回“可解释”的错误原因与建议（如重新拍摄姿势/光照）

## 5.非功能需求（Non-Functional Requirements）

NFR1. 性能：在一台普通手机/笔记本上单张处理时间 **≤ 2 秒**（可调参，但需说明） NFR2. 可复现：一键运行（README含环境、依赖、命令） NFR3. 可维护：模块化、可测试（至少含关键单元测试/图像回归测试脚本） 

## 6.交付物（Deliverables）

1. 代码仓库（含提交历史）
2. README（安装/运行/演示步骤）
3. `docs/design.md`：技术选型与调查报告（你为什么这么做、替代方案、失败场景）
4. 最少3张测试样例的评估报告（可用自采+授权/公开数据）
5. 3~5 分钟演示视频（输入→输出→失败处理）

## 7.验收标准（Acceptance Criteria）

- 任意给定一张“清晰手心、掌纹可见”的照片，能输出三条线并叠加显示
- 对至少 20 张样例中：
  - **≥ 70%** 能给出可用的三线结果（粗略即可，但必须看得出是三条主线）
  - 失败的 **100%** 给出明确原因与建议
- 代码可运行、可复现、结构清晰
- 能在复盘中解释：你的算法/模型如何从掌纹中区分三条主线（不是“跑出来了但我也不知道为啥”）

## 8.必修项清单（必须做到）

-  输入：拍照/导入 + EXIF方向处理
-  手掌ROI检测（至少能在简单背景下稳定）
-  三条主线输出 + 叠加绘制
-  置信度/失败原因输出
-  一键运行 + 文档齐全 + 可复现评估脚本

## 9.加分项（可选）

- 手掌关键点定位（掌根/虎口等）用于稳定三线定位
- 支持左右手、自适应缩放、复杂背景鲁棒性提升
- 提供简单的人工校正（拖动线条点）
- 结果可导出为 JSON（含点集）便于后续系统集成